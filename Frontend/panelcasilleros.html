<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Mapa Interactivo de Casilleros</title>
  <link rel="stylesheet" href="Frontend/stylecasillero.css">
</head>
<body>
  <h1>Mapa Interactivo de Casilleros</h1>
  <div class="casilleros-container" id="casilleros-container"></div>

  <script>
    const container = document.getElementById('casilleros-container');

    fetch('get_casilleros.php')
      .then(response => response.json())
      .then(data => {
        for (let i = 1; i <= 300; i++) {
          const casillero = document.createElement('button');
          casillero.classList.add('casillero');
          casillero.textContent = i;
          if (data[i] === 'ocupado') casillero.classList.add('ocupado');

          casillero.addEventListener('click', () => {
            const estado = casillero.classList.toggle('ocupado') ? 'ocupado' : 'libre';
            fetch('update_casillero.php', {
              method: 'POST',
              headers: { 'Content-Type': 'application/json' },
              body: JSON.stringify({ id: i, estado })
            });
          });

          container.appendChild(casillero);
        }
      });
  </script>
</body>
</html>
